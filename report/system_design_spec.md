% 方式設計仕様書
% \西暦 \today
% Group 18

# 概要

設計したプロセッサは,5ステージのマルチサイクル方式のプロセッサである.


# 命令セットアーキテクチャ

SIMPLEアーキテクチャと基本的には同じである.
まず,以下のような命令の形式を定める.

## 形式

### R形式

```
#-----|----|----|-----|---#
| op1 | rs | rd | op3 | d |
#15---|13--|10--|7----|3--#
```

### I形式

```
#-----|----|----|-----|---#
| op1 | rs | rd |    d    |
#15---|13--|10--|7--------#
```

## 演算命令

演算命令では,R形式を用いる.

| name |            value            |
| ---- | --------------------------- |
| op1  |             11              |
|  rs  |   source register number    |
|  rd  | destination register number |
| op3  |         演算コード          |
|  d   | シフト演算のときのシフト数  |

ただし,演算コードは以下のように定める.

| code |         計算          |
| ---- | --------------------- |
| 0000 |       in1 + in2       |
| 0001 |       in1 - in2       |
| 1000 |  in1 & in2 (bitwise)  |
| 1001 | in1 `|` in2 (bitwise) |
| 1010 |       in1 << i2       |
| 1011 |      in1 >> in2       |

### 算術演算

算術演算は,演算コードが0で始まる.
このときの動作は
$$ r[rd] = op3(r[rd], r[rs]) $$
である.

### ビット演算

ビット演算は演算コードが1ではじまる.
このときの動作は,
$$ r[rd] = op3(r[rs], d) $$
である.

## ロード,ストア命令

ロード,ストア命令はI形式を用いる.

### ロード命令

ロード命令のとき,$op1 = 00$である.

行う動作は,
$$r[ra] = *(r[rb] + signext(d)) $$

### ストア命令

ストア命令のとき,$op1 = 00$である.

行う動作は,
$$*(r[rb] + signext(d)) = r[ra]$$

# 構造と動作

