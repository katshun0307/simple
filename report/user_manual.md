% ユーザーズマニュアル (Group 18)
% 1029-28-9483 勝田 峻太朗
 1029-28-1547 住江 祐哉
% \西暦 \today

\newpage

# 概要

# 性能と特徴

# 命令セットアーキテクチャ

## 命令形式

命令形式は,以下の2つからなる.

### R形式

```
#-----|----|----|-----|---#
| op1 | rs | rd | op3 | d |
#15---|13--|10--|7----|3--#
```

### I形式

```
#-----|----|----|-----|---#
| op1 | ra | rb |    d    |
#15---|13--|10--|7--------#
```


## 演算命令



# 構造と動作

## 構造
このプロセッサはステージ4つ(p1~p4)とコントローラに分かれている  
それらの機能を以下で説明する  

### IF:命令フェッチ(p1.v)

プログラムカウンタ、プログラムの命令が書かれた大容量メモリを含むモジュールである.  
マルチプレクサ、加算器も含む.  
このモジュールで16bit固定長命令が書かれたプログラムを命令メモリから読み出し、このプロセスで行う命令を決定する.

### ID&WB:命令デコードとレジスタフェッチ(p2.v)

読み出したり、書き込んだりするためのデータが保存されたレジスタ、符号拡張器が含まれているモジュールである.  
このモジュールではレジスタからの読み出し・書き込みと、命令に書かれている定数のビット変換(拡張)を行う.  
制御もここで入力を受け取って行う.  
ただし、命令の解釈/レジスタからの読み出し/レジスタへの書き込みのタイミングが異なり、それは後述する.  

### EX:命令実行とアドレス生成(p3.v)

ここで演算命令の演算を行う.  
ビットシフタ、加算器、ALU、マルチプレクサが含まれる.  
演算結果により、4種類のフラグ(v,z,c,s)を決定し、条件分岐命令で使用する.  
また、出力命令による7SEG LEDへの出力の制御もこのステージで行われている.  　　

### MEM:メモリ・アクセス(p4.v)

データメモリとそれに読み込む/書き込む機能を持つ.

### コントローラー(Controller.v)

全体に適切なクロックを送り,マルチサイクル実行を実現するモジュール.
プロセッサ全体の実行,停止,リセットもこのモジュールで扱う.  

## 動作
ステージ自体は4つに分かれているが、動作としては5サイクルである

![クロック画像](/images/ClockAction.png)
